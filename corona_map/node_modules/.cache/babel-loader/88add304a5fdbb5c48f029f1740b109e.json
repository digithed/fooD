{"ast":null,"code":"var _jsxFileName = \"/Users/nick/Documents/corona_food/corona_map/src/components/Menu.js\";\nimport React from 'react';\nimport Search from './Search.js';\nimport axios from 'axios';\n\nclass Menu extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      'apiKey': 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx',\n      'map': null,\n      'active': null,\n      'isActive': false,\n      'isgood': false,\n      'popup': null,\n      'popPosition': null,\n      'loading': false,\n      'data2': null,\n      'pickupChecked': false,\n      'popup': true,\n      'food_type': null,\n      'location': null,\n      'food_filter': false\n    };\n\n    this.apiCall = (lat, long) => {\n      var lim = 30;\n      axios.get('https://cors-anywhere.herokuapp.com/' + 'https://api.yelp.com/v3/businesses/search', {\n        params: {\n          location: this.state.location,\n          latitude: lat,\n          longitude: long,\n          limit: lim\n        },\n        headers: {\n          Authorization: 'Bearer ' + this.state.apiKey\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (lat == null && long == null) {\n          lat = res.data.businesses[0].coordinates.latitude;\n          long = res.data.businesses[0].coordinates.longitude;\n        }\n\n        if (!this.state.pickupChecked) {\n          res.data = res.data.businesses.filter(biz => {\n            if (this.state.food_filter) {\n              var i;\n\n              for (i = 0; i < biz.categories.length; i++) {\n                var item = biz.categories[i].title.toUpperCase();\n\n                if (biz.rating >= 4 && item.includes(this.state.food_type.toUpperCase())) {\n                  return biz;\n                }\n              }\n            } else {\n              if (biz.rating >= 4) {\n                return biz;\n              }\n            }\n          });\n        }\n\n        console.log('thru');\n        this.setState({\n          data: res.data,\n          data2: res.data,\n          isgood: true,\n          viewport: {\n            center: [lat, long],\n            zoom: 15\n          },\n          loading: false\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.apiCall(this.props.user_lat, this.props.user_long);\n  }\n\n  handleChange(e) {\n    this.setState({\n      location: e.target.value\n    });\n  }\n\n  handleFoodSearch(e) {\n    this.setState({\n      food_filter: false\n    });\n    var my_data;\n    my_data = this.state.data.filter(biz => {\n      var i;\n\n      for (i = 0; i < biz.categories.length; i++) {\n        var item = biz.categories[i].title.toUpperCase();\n\n        if (item.includes(e.target.value.toUpperCase())) {\n          return biz;\n        }\n      }\n    });\n    this.setState({\n      food_type: e.target.value,\n      food_filter: true,\n      data2: my_data\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n    this.apiCall(null, null);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 2\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 2\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 2\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 5\n      }\n    }, \"Other Location\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.location,\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 5\n      }\n    }, \"Food Type\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.food_type,\n      onChange: this.handleFoodSearch.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 5\n      }\n    }), this.state.isgood && /*#__PURE__*/React.createElement(Search, {\n      food_type: this.state.food_type,\n      data: this.state.data,\n      data2: this.state.data2,\n      isgood: this.state.isgood,\n      apiCall: this.apiCall,\n      viewport: this.state.viewport,\n      recurse: this.props.reset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 2\n      }\n    }));\n  }\n\n}\n\nexport default Menu;","map":{"version":3,"sources":["/Users/nick/Documents/corona_food/corona_map/src/components/Menu.js"],"names":["React","Search","axios","Menu","Component","state","apiCall","lat","long","lim","get","params","location","latitude","longitude","limit","headers","Authorization","apiKey","then","res","console","log","data","businesses","coordinates","pickupChecked","filter","biz","food_filter","i","categories","length","item","title","toUpperCase","rating","includes","food_type","setState","data2","isgood","viewport","center","zoom","loading","catch","err","componentDidMount","props","user_lat","user_long","handleChange","e","target","value","handleFoodSearch","my_data","handleSubmit","preventDefault","render","bind","reset"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Search from './Search.js'\nimport axios from 'axios';\n\nclass Menu extends React.Component {\n\nstate = {\n    'apiKey': 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx',\n    'map': null,\n    'active': null,\n    'isActive': false,\n    'isgood': false,\n    'popup': null,\n    'popPosition': null,\n    'loading': false,\n    'data2' : null,\n    'pickupChecked': false,\n    'popup': true,\n\n\t 'food_type': null,\n\t 'location': null,\n\t 'food_filter': false,\n}\n\ncomponentDidMount(){\n\tthis.apiCall(this.props.user_lat, this.props.user_long);\n}\n\nhandleChange(e){\n  this.setState({location: e.target.value});\n}\n\nhandleFoodSearch(e){\n\tthis.setState({food_filter: false});\n   var my_data;\n  my_data = this.state.data.filter(biz => {\n  \tvar i;\n  \tfor(i=0; i < biz.categories.length; i++){\n  \t\tvar item = biz.categories[i].title.toUpperCase()\n  \t\tif(item.includes(e.target.value.toUpperCase())){\n      return biz;\n    }\n  \t}\n    \n  \n  });\n\nthis.setState({food_type: e.target.value, food_filter:true, data2: my_data});\n\n}\n\n handleSubmit(e){\n    e.preventDefault();\n    this.setState({loading: true});\n    this.apiCall(null,null);\n  }\n\napiCall = (lat, long) => {\n  var lim = 30;\n  axios.get('https://cors-anywhere.herokuapp.com/'+'https://api.yelp.com/v3/businesses/search', {\n     params: {\n      location: this.state.location,\n      latitude: lat,\n      longitude: long,\n      limit: lim,\n     },\n     headers: {\n    Authorization: 'Bearer ' + this.state.apiKey\n }\n    })\n    .then( res => {\n      console.log(res.data);\n       if(lat == null && long == null){\n  \t\tlat = res.data.businesses[0].coordinates.latitude;\n  \t\tlong = res.data.businesses[0].coordinates.longitude;\n  }\n      if(!this.state.pickupChecked){\n\n      res.data = res.data.businesses.filter((biz) => {\n        if(this.state.food_filter){\n        \tvar i;\n        \tfor(i=0; i < biz.categories.length; i++){\n  \t\t\t\tvar item = biz.categories[i].title.toUpperCase()\n        \tif(biz.rating >= 4 && item.includes(this.state.food_type.toUpperCase())){\n            return biz;\n          }\n      }\n      }\n      \telse{\n      \t\tif(biz.rating >= 4){\n      \t\t\treturn biz;\n      \t\t}\n\n      \t}\n\n      })\n    }\n    console.log('thru');\n      this.setState({data: res.data, data2: res.data, isgood: true,\n        viewport: {center: [lat, long],\n          zoom: 15},\n        loading: false\n      });\n      \n    \n    })\n    .catch( err => {\n      console.log(err);\n    })\n\n}\n\nrender(){\n\treturn(\n\t<div>\n\t<br></br>\n\t<form onSubmit={this.handleSubmit.bind(this)}>\n    <label>Other Location</label>\n    <input type=\"text\" value={this.state.location} onChange={this.handleChange.bind(this)}/>\n    <input type=\"submit\" value=\"Submit\"/>\n    </form>\n    <br></br>\n    <label>Food Type</label>\n    <input type=\"text\" value={this.state.food_type} onChange={this.handleFoodSearch.bind(this)}/>\n\n\t{this.state.isgood && (\n\t<Search food_type={this.state.food_type}\n\tdata={this.state.data} data2={this.state.data2}\n\tisgood={this.state.isgood} apiCall={this.apiCall}\n\tviewport={this.state.viewport}\n\trecurse={this.props.reset} />\n\t \n\t)}\n\n\t</div>\n\t);\n\n}\n\n}\n\nexport default Menu"]},"metadata":{},"sourceType":"module"}