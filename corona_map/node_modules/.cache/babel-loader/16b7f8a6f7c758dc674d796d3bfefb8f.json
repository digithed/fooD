{"ast":null,"code":"var _jsxFileName = \"/Users/nick/Documents/corona_food/corona_map/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { Map, Marker, Popup, TileLayer } from 'react-leaflet';\nimport { Icon } from \"leaflet\";\nimport { css } from \"@emotion/core\";\nimport Control from 'react-leaflet-control';\nimport PulseLoader from \"react-spinners/PulseLoader\";\nimport axios from 'axios';\nimport Slider from 'react-animated-slider';\nimport 'react-animated-slider/build/horizontal.css';\nconst override = css`\n  display: block;\n  margin-top: 200px;\n  border-color: green;\n`;\nvar flag = 0;\nvar flag2 = 0;\nconst DEFAULT_VIEWPORT = {\n  center: [0, 0],\n  zoom: 14\n};\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      'location': null,\n      'apiKey': 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx',\n      'lat': 0,\n      'long': 0,\n      'map': null,\n      'active': null,\n      'isActive': false,\n      'isgood': false,\n      'popup': null,\n      'popPosition': null,\n      'loading': false,\n      'food_type': null,\n      'data2': null,\n      'pickupChecked': false,\n      'viewport': null,\n      'popup': true\n    };\n\n    this.setPopup = () => {\n      this.setState({\n        popup: true\n      });\n    };\n\n    this.closePopup = () => {\n      this.setState({\n        popup: false\n      });\n    };\n\n    this.updateViewport = viewport => {\n      this.setState({\n        viewport\n      });\n    };\n\n    this.apiCall = () => {\n      axios.get('https://cors-anywhere.herokuapp.com/' + 'https://api.yelp.com/v3/businesses/search', {\n        params: {\n          location: this.state.location,\n          latitude: this.state.viewport.center[0],\n          longitude: this.state.viewport.center[1],\n          limit: 30\n        },\n        headers: {\n          Authorization: 'Bearer ' + this.state.apiKey\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (!this.state.pickupChecked) {\n          res.data = res.data.businesses.filter(biz => {\n            if (biz.rating >= 4) {\n              return biz;\n            }\n          });\n        }\n\n        this.setState({\n          data: res.data,\n          isgood: true,\n          viewport: {\n            center: [res.data[0].coordinates.latitude, res.data[0].coordinates.longitude],\n            zoom: 14\n          },\n          // lat: res.data[0].coordinates.latitude,\n          //  long: res.data[0].coordinates.latitude,\n          loading: false\n        });\n        console.log(this.state.viewport);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  //  flag++;\n  //  if(flag % 5 == 0){\n  //   axios.get('https://cors-anywhere.herokuapp.com/'+'https://api.yelp.com/v3/businesses/search', {\n  //     params: {\n  //    latitude: this.state.viewport.center[0],\n  //    longitude: this.state.viewport.center[1],\n  //      limit: 30,\n  //     },\n  //     headers: {\n  //    Authorization: 'Bearer ' + this.state.apiKey\n  // }\n  //    })\n  //    .then( res => {\n  //      console.log(res.data);\n  //      if(!this.state.pickupChecked){\n  //      res.data = res.data.businesses.filter((biz) => {\n  //        if(biz.rating >= 4){\n  //            return biz;\n  //          }\n  //      })\n  //    }\n  //      this.setState({data: res.data, isgood: true,\n  //        viewport: {center: [res.data[0].coordinates.latitude,\n  //          res.data[0].coordinates.longitude],\n  //          zoom: 14},\n  //      });\n  //    })\n  //    .catch( err => {\n  //      console.log(err);\n  //    })\n  //  }//}\n  handleFoodSearch(e) {\n    var my_data;\n    my_data = this.state.data.filter(biz => {\n      if (biz.categories[0].alias.includes(e.target.value)) {\n        return biz;\n      }\n    });\n    this.setState({\n      food_type: e.target.value,\n      data2: my_data\n    });\n  }\n\n  handleCheck(e) {\n    this.setState({\n      pickupChecked: true\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      location: e.target.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n    this.apiCall(null, null);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 5\n      }\n    }, \"QuickDeliver\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 5\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.location,\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 5\n      }\n    }, \"Food Type\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.food_type,\n      onChange: this.handleFoodSearch.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(PulseLoader, {\n      css: override,\n      size: 25,\n      color: \"#123abc\",\n      loading: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 5\n      }\n    }), this.state.isgood && /*#__PURE__*/React.createElement(Map, {\n      onClick: this.closePopup,\n      onViewportChanged: this.updateViewport,\n      center: this.state.viewport,\n      viewport: this.state.viewport,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      attribution: \"\\xA9 <a href= \\\"https://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Control, {\n      position: \"topleft\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.apiCall.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 5\n      }\n    }, \"Search Area\")), this.state.food_type && this.state.data2.map(b => /*#__PURE__*/React.createElement(Marker, {\n      key: b.id,\n      position: [b.coordinates.latitude, b.coordinates.longitude],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      onClick: this.setPopup,\n      position: [b.coordinates.latitude, b.coordinates.longitude],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 7\n      }\n    }, b.name), /*#__PURE__*/React.createElement(\"img\", {\n      src: b.image_url,\n      height: \"150px\",\n      width: \"200px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 7\n      }\n    }, \"Rating: \", b.rating), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 7\n      }\n    }, \"Known for: \", b.categories[0].title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: b.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 10\n      }\n    }, \"Yelp Page\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 7\n      }\n    }, \"Phone: \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"tel:\" + b.phone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }, b.phone)))))) || this.state.data.map(b => /*#__PURE__*/React.createElement(Marker, {\n      key: b.id,\n      position: [b.coordinates.latitude, b.coordinates.longitude],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      onClick: this.setPopup,\n      position: [b.coordinates.latitude, b.coordinates.longitude],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 7\n      }\n    }, b.name), /*#__PURE__*/React.createElement(\"img\", {\n      src: b.image_url,\n      height: \"150px\",\n      width: \"200px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 7\n      }\n    }, \"Rating: \", b.rating), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }\n    }, \"Known for: \", b.categories[0].title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: b.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 10\n      }\n    }, \"Yelp Page\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 7\n      }\n    }, \"Phone: \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"tel:\" + b.phone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, b.phone))))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/nick/Documents/corona_food/corona_map/src/App.js"],"names":["React","Map","Marker","Popup","TileLayer","Icon","css","Control","PulseLoader","axios","Slider","override","flag","flag2","DEFAULT_VIEWPORT","center","zoom","App","Component","state","setPopup","setState","popup","closePopup","updateViewport","viewport","apiCall","get","params","location","latitude","longitude","limit","headers","Authorization","apiKey","then","res","console","log","data","pickupChecked","businesses","filter","biz","rating","isgood","coordinates","loading","catch","err","handleFoodSearch","e","my_data","categories","alias","includes","target","value","food_type","data2","handleCheck","handleChange","handleSubmit","preventDefault","render","bind","map","b","id","name","image_url","title","url","phone"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport {Map, Marker, Popup, TileLayer, type Viewport} from 'react-leaflet';\nimport {Icon} from \"leaflet\";\nimport { css } from \"@emotion/core\";\nimport Control from 'react-leaflet-control';\nimport PulseLoader from \"react-spinners/PulseLoader\";\nimport axios from 'axios';\nimport Slider from 'react-animated-slider';\nimport 'react-animated-slider/build/horizontal.css';\n\n\nconst override = css`\n  display: block;\n  margin-top: 200px;\n  border-color: green;\n`;\n\nvar flag = 0;\nvar flag2 = 0;\nconst DEFAULT_VIEWPORT = {\n  center: [0, 0],\n  zoom: 14,\n}\nclass App extends React.Component<{},{ viewport: Viewport },>  {\n  state = {\n    'location': null,\n    'apiKey': 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx',\n    'lat': 0,\n    'long': 0,\n    'map': null,\n    'active': null,\n    'isActive': false,\n    'isgood': false,\n    'popup': null,\n    'popPosition': null,\n    'loading': false,\n    'food_type': null,\n    'data2' : null,\n    'pickupChecked': false,\n    'viewport': null,\n    'popup': true,\n    \n  }\n\nsetPopup = () => {\n  this.setState({popup: true});\n}\n\nclosePopup = () => {\n  this.setState({popup: false});\n}\n\nupdateViewport = (viewport: Viewport) => {\n  this.setState({viewport});\n\n  \n  \n\n}\n //  flag++;\n //  if(flag % 5 == 0){\n //   axios.get('https://cors-anywhere.herokuapp.com/'+'https://api.yelp.com/v3/businesses/search', {\n //     params: {\n //    latitude: this.state.viewport.center[0],\n //    longitude: this.state.viewport.center[1],\n //      limit: 30,\n //     },\n //     headers: {\n //    Authorization: 'Bearer ' + this.state.apiKey\n // }\n //    })\n //    .then( res => {\n //      console.log(res.data);\n //      if(!this.state.pickupChecked){\n\n //      res.data = res.data.businesses.filter((biz) => {\n //        if(biz.rating >= 4){\n //            return biz;\n //          }\n\n //      })\n //    }\n //      this.setState({data: res.data, isgood: true,\n //        viewport: {center: [res.data[0].coordinates.latitude,\n //          res.data[0].coordinates.longitude],\n //          zoom: 14},\n    \n //      });\n    \n //    })\n //    .catch( err => {\n //      console.log(err);\n //    })\n //  }//}\n\nhandleFoodSearch(e){\n  var my_data;\n  my_data = this.state.data.filter(biz => {\n    if(biz.categories[0].alias.includes(e.target.value)){\n      return biz;\n    }\n  \n  });\n  \n  this.setState({food_type: e.target.value, data2: my_data});\n\n}\n\nhandleCheck(e){\n  this.setState({pickupChecked: true})\n}\n\nhandleChange(e){\n  this.setState({location: e.target.value});\n}\n\napiCall = () => {\n\n\n  axios.get('https://cors-anywhere.herokuapp.com/'+'https://api.yelp.com/v3/businesses/search', {\n     params: {\n      location: this.state.location,\n      latitude: this.state.viewport.center[0],\n      longitude: this.state.viewport.center[1],\n      limit: 30,\n     },\n     headers: {\n    Authorization: 'Bearer ' + this.state.apiKey\n }\n    })\n    .then( res => {\n      console.log(res.data);\n      if(!this.state.pickupChecked){\n\n      res.data = res.data.businesses.filter((biz) => {\n        if(biz.rating >= 4){\n            return biz;\n          }\n\n      })\n    }\n      this.setState({data: res.data, isgood: true,\n        viewport: {center: [res.data[0].coordinates.latitude,\n          res.data[0].coordinates.longitude],\n          zoom: 14},\n       // lat: res.data[0].coordinates.latitude,\n       //  long: res.data[0].coordinates.latitude,\n        loading: false\n      });\n      console.log(this.state.viewport);\n    \n    })\n    .catch( err => {\n      console.log(err);\n    })\n\n}\n\n  handleSubmit(e){\n    e.preventDefault();\n    this.setState({loading: true});\n    this.apiCall(null,null);\n  }\n\n  render(){\n  return( \n    <div className=\"App\">\n    <h1>QuickDeliver</h1>\n    <br></br>\n    <form onSubmit={this.handleSubmit.bind(this)}>\n    <label>Location</label>\n    <input type=\"text\" value={this.state.location} onChange={this.handleChange.bind(this)}/>\n    <input type=\"submit\" value=\"Submit\"/>\n    </form>\n    <br></br>\n    <label>Food Type</label>\n    <input type=\"text\" value={this.state.food_type} onChange={this.handleFoodSearch.bind(this)}/>\n\n\n    <PulseLoader\n          css={override}\n          size={25}\n          color={\"#123abc\"}\n          loading={this.state.loading}\n        />\n    {this.state.isgood && (\n    <Map\n    onClick={this.closePopup}\n    onViewportChanged={this.updateViewport}\n    center = {this.state.viewport}\n    viewport = {this.state.viewport}\n    >\n    <TileLayer\n    url = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    attribution = '&copy; <a href= \"https://osm.org/copyright\">OpenStreetMap</a>\n    contributors'\n    />\n\n    <Control position=\"topleft\">\n    <button \n          onClick={ () => this.apiCall.bind(this) }\n        >\n        Search Area\n        </button>\n        </Control>\n\n    \n        {this.state.food_type && this.state.data2.map((b) => (\n          <Marker key={b.id}\n      position={[b.coordinates.latitude, b.coordinates.longitude]}\n       >\n       <Popup onClick={this.setPopup} \n       position={[b.coordinates.latitude, b.coordinates.longitude]} >\n        <div>\n      <h2>{b.name}</h2>\n      <img src={b.image_url} height=\"150px\" width=\"200px\"/>\n      <p>Rating: {b.rating}</p>\n      <p>Known for: {b.categories[0].title}</p> \n      <p><a href={b.url}>Yelp Page</a></p>\n      <p>Phone: <a href={\"tel:\" + b.phone}>{b.phone}</a></p> \n\n      </div>\n      </Popup>\n        \n  \n      </Marker>))\n    ||\n      this.state.data.map((b) => (\n      <Marker key={b.id}\n      position={[b.coordinates.latitude, b.coordinates.longitude]}\n       >\n       <Popup  onClick={this.setPopup}\n       position={[b.coordinates.latitude, b.coordinates.longitude]} >\n        <div>\n      <h2>{b.name}</h2>\n      <img src={b.image_url} height=\"150px\" width=\"200px\"/>\n      <p>Rating: {b.rating}</p>\n      <p>Known for: {b.categories[0].title}</p> \n      <p><a href={b.url}>Yelp Page</a></p>\n      <p>Phone: <a href={\"tel:\" + b.phone}>{b.phone}</a></p> \n      </div>\n      </Popup>\n        \n  \n      </Marker>\n\n      ))}\n\n    </Map>\n    )}\n\n  </div>\n  );\n}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}