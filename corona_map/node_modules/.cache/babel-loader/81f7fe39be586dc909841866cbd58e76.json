{"ast":null,"code":"import axios from 'axios';\nexport function apiCall(location, lat, long) {\n  var lim = 30;\n  axios.get('https://cors-anywhere.herokuapp.com/' + 'https://api.yelp.com/v3/businesses/search', {\n    params: {\n      location: location,\n      latitude: lat,\n      longitude: long,\n      limit: lim\n    },\n    headers: {\n      Authorization: 'Bearer ' + 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx'\n    }\n  }).then(res => {\n    console.log(res.data);\n\n    if (lat == null && long == null) {\n      lat = res.data.businesses[0].coordinates.latitude;\n      long = res.data.businesses[0].coordinates.longitude;\n    }\n\n    res.data = res.data.businesses.filter(biz => {\n      if (biz.rating >= 4) {\n        return biz;\n      }\n    });\n    var json = {\n      data: res.data,\n      data2: res.data,\n      isgood: true,\n      viewport: {\n        center: [lat, long],\n        zoom: 15\n      },\n      isloading: false\n    };\n    var myJSON = JSON.stringify(json);\n    return myJSON;\n  }).catch(err => {\n    console.log(err);\n  });\n}\nexport function apiCallFood(location, lat, long, food_type) {\n  var lim = 30;\n  axios.get('https://cors-anywhere.herokuapp.com/' + 'https://api.yelp.com/v3/businesses/search', {\n    params: {\n      location: location,\n      latitude: lat,\n      longitude: long,\n      limit: lim\n    },\n    headers: {\n      Authorization: 'Bearer ' + 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx'\n    }\n  }).then(res => {\n    console.log(res.data);\n\n    if (lat == null && long == null) {\n      lat = res.data.businesses[0].coordinates.latitude;\n      long = res.data.businesses[0].coordinates.longitude;\n    }\n\n    res.data = res.data.businesses.filter(biz => {\n      var i;\n\n      for (i = 0; i < biz.categories.length; i++) {\n        var item = biz.categories[i].title.toUpperCase();\n\n        if (biz.rating >= 4 && item.includes(food_type.toUpperCase())) {\n          return biz;\n        } else {\n          if (biz.rating >= 4) {\n            return biz;\n          }\n        }\n      }\n    });\n    var json = {\n      data: res.data,\n      data2: res.data,\n      isgood: true,\n      viewport: {\n        center: [lat, long],\n        zoom: 15\n      },\n      isloading: false\n    };\n    var myJSON = JSON.stringify(json);\n    return myJSON;\n  }).catch(err => {\n    console.log(err);\n  });\n}","map":{"version":3,"sources":["/Users/nick/Documents/corona_food/corona_map/src/components/utils.js"],"names":["axios","apiCall","location","lat","long","lim","get","params","latitude","longitude","limit","headers","Authorization","then","res","console","log","data","businesses","coordinates","filter","biz","rating","json","data2","isgood","viewport","center","zoom","isloading","myJSON","JSON","stringify","catch","err","apiCallFood","food_type","i","categories","length","item","title","toUpperCase","includes"],"mappings":"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","sourcesContent":["import axios from 'axios';\nexport function apiCall(location, lat, long) {\n  var lim = 30;\n  axios.get('https://cors-anywhere.herokuapp.com/'+'https://api.yelp.com/v3/businesses/search', {\n     params: {\n      location: location,\n      latitude: lat,\n      longitude: long,\n      limit: lim,\n     },\n     headers: {\n    Authorization: 'Bearer ' + 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx'\n }\n    })\n    .then( res => {\n      console.log(res.data);\n       if(lat == null && long == null){\n  \t\tlat = res.data.businesses[0].coordinates.latitude;\n  \t\tlong = res.data.businesses[0].coordinates.longitude;\n  }\n      \n\n      res.data = res.data.businesses.filter((biz) => {\n        \n      \t\tif(biz.rating >= 4){\n      \t\t\treturn biz;\n\n      \t}\n\n      })\n       var json = {data: res.data, data2:res.data, isgood: true, viewport:{center: [lat,long], zoom:15}, isloading:false};\n      var myJSON = JSON.stringify(json);\n      return myJSON;\n    \n      \n    \n    })\n    .catch( err => {\n      console.log(err);\n    })\n\n}\n\nexport function apiCallFood(location, lat, long, food_type) {\n  var lim = 30;\n  axios.get('https://cors-anywhere.herokuapp.com/'+'https://api.yelp.com/v3/businesses/search', {\n     params: {\n      location: location,\n      latitude: lat,\n      longitude: long,\n      limit: lim,\n     },\n     headers: {\n    Authorization: 'Bearer ' + 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx'\n }\n    })\n    .then( res => {\n      console.log(res.data);\n       if(lat == null && long == null){\n      lat = res.data.businesses[0].coordinates.latitude;\n      long = res.data.businesses[0].coordinates.longitude;\n  }\n      \n\n      res.data = res.data.businesses.filter((biz) => {\n          var i;\n          for(i=0; i < biz.categories.length; i++){\n          var item = biz.categories[i].title.toUpperCase()\n          if(biz.rating >= 4 && item.includes(food_type.toUpperCase())){\n            return biz;\n          }\n      \n      \n        else{\n          if(biz.rating >= 4){\n            return biz;\n          }\n        }\n\n        }\n\n      })\n      var json = {data: res.data, data2:res.data, isgood: true, viewport:{center: [lat,long], zoom:15}, isloading:false};\n      var myJSON = JSON.stringify(json);\n      return myJSON;\n    \n      \n    \n    })\n    .catch( err => {\n      console.log(err);\n    })\n\n}\n\n\n"]},"metadata":{},"sourceType":"module"}