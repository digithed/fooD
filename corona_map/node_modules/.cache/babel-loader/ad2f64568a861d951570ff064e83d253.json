{"ast":null,"code":"import axios from 'axios';\nexport function apiCall(location, lat, long) {\n  var lim = 30;\n  axios.get('https://cors-anywhere.herokuapp.com/' + 'https://api.yelp.com/v3/businesses/search', {\n    params: {\n      location: location,\n      latitude: lat,\n      longitude: long,\n      limit: lim\n    },\n    headers: {\n      Authorization: 'Bearer ' + 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx'\n    }\n  }).then(res => {\n    console.log(res.data);\n\n    if (lat == null && long == null) {\n      lat = res.data.businesses[0].coordinates.latitude;\n      long = res.data.businesses[0].coordinates.longitude;\n    }\n\n    if (!this.state.pickupChecked) {\n      res.data = res.data.businesses.filter(biz => {\n        if (this.state.food_filter) {\n          var i;\n\n          for (i = 0; i < biz.categories.length; i++) {\n            var item = biz.categories[i].title.toUpperCase();\n\n            if (biz.rating >= 4 && item.includes(this.state.food_type.toUpperCase())) {\n              return biz;\n            }\n          }\n        } else {\n          if (biz.rating >= 4) {\n            return biz;\n          }\n        }\n      });\n    }\n\n    return [res.data, res.data, true, {\n      center: [lat, long],\n      zoom: 15\n    }, false];\n  }).catch(err => {\n    console.log(err);\n  });\n}","map":{"version":3,"sources":["/Users/nick/Documents/corona_food/corona_map/src/components/utils.js"],"names":["axios","apiCall","location","lat","long","lim","get","params","latitude","longitude","limit","headers","Authorization","then","res","console","log","data","businesses","coordinates","state","pickupChecked","filter","biz","food_filter","i","categories","length","item","title","toUpperCase","rating","includes","food_type","center","zoom","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,SAASC,OAAT,CAAiBC,QAAjB,EAA2BC,GAA3B,EAAgCC,IAAhC,EAAsC;AAC3C,MAAIC,GAAG,GAAG,EAAV;AACAL,EAAAA,KAAK,CAACM,GAAN,CAAU,yCAAuC,2CAAjD,EAA8F;AAC3FC,IAAAA,MAAM,EAAE;AACPL,MAAAA,QAAQ,EAAEA,QADH;AAEPM,MAAAA,QAAQ,EAAEL,GAFH;AAGPM,MAAAA,SAAS,EAAEL,IAHJ;AAIPM,MAAAA,KAAK,EAAEL;AAJA,KADmF;AAO3FM,IAAAA,OAAO,EAAE;AACVC,MAAAA,aAAa,EAAE,YAAY;AADjB;AAPkF,GAA9F,EAWGC,IAXH,CAWSC,GAAG,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;;AACC,QAAGd,GAAG,IAAI,IAAP,IAAeC,IAAI,IAAI,IAA1B,EAA+B;AAClCD,MAAAA,GAAG,GAAGW,GAAG,CAACG,IAAJ,CAASC,UAAT,CAAoB,CAApB,EAAuBC,WAAvB,CAAmCX,QAAzC;AACAJ,MAAAA,IAAI,GAAGU,GAAG,CAACG,IAAJ,CAASC,UAAT,CAAoB,CAApB,EAAuBC,WAAvB,CAAmCV,SAA1C;AACD;;AACG,QAAG,CAAC,KAAKW,KAAL,CAAWC,aAAf,EAA6B;AAE7BP,MAAAA,GAAG,CAACG,IAAJ,GAAWH,GAAG,CAACG,IAAJ,CAASC,UAAT,CAAoBI,MAApB,CAA4BC,GAAD,IAAS;AAC7C,YAAG,KAAKH,KAAL,CAAWI,WAAd,EAA0B;AACzB,cAAIC,CAAJ;;AACA,eAAIA,CAAC,GAAC,CAAN,EAASA,CAAC,GAAGF,GAAG,CAACG,UAAJ,CAAeC,MAA5B,EAAoCF,CAAC,EAArC,EAAwC;AAC3C,gBAAIG,IAAI,GAAGL,GAAG,CAACG,UAAJ,CAAeD,CAAf,EAAkBI,KAAlB,CAAwBC,WAAxB,EAAX;;AACG,gBAAGP,GAAG,CAACQ,MAAJ,IAAc,CAAd,IAAmBH,IAAI,CAACI,QAAL,CAAc,KAAKZ,KAAL,CAAWa,SAAX,CAAqBH,WAArB,EAAd,CAAtB,EAAwE;AACrE,qBAAOP,GAAP;AACD;AACJ;AACA,SARC,MASG;AACH,cAAGA,GAAG,CAACQ,MAAJ,IAAc,CAAjB,EAAmB;AAClB,mBAAOR,GAAP;AACA;AAED;AAED,OAjBU,CAAX;AAkBD;;AACC,WAAO,CAACT,GAAG,CAACG,IAAL,EAAWH,GAAG,CAACG,IAAf,EAAqB,IAArB,EAA2B;AAACiB,MAAAA,MAAM,EAAE,CAAC/B,GAAD,EAAKC,IAAL,CAAT;AAAqB+B,MAAAA,IAAI,EAAC;AAA1B,KAA3B,EAA0D,KAA1D,CAAP;AAID,GA1CH,EA2CGC,KA3CH,CA2CUC,GAAG,IAAI;AACbtB,IAAAA,OAAO,CAACC,GAAR,CAAYqB,GAAZ;AACD,GA7CH;AA+CD","sourcesContent":["import axios from 'axios';\nexport function apiCall(location, lat, long) {\n  var lim = 30;\n  axios.get('https://cors-anywhere.herokuapp.com/'+'https://api.yelp.com/v3/businesses/search', {\n     params: {\n      location: location,\n      latitude: lat,\n      longitude: long,\n      limit: lim,\n     },\n     headers: {\n    Authorization: 'Bearer ' + 'BDKJluIkcQa-Lwn_Ye9BfW_m8ajO-agWP-WXdpyAMJ3O6iAhangiPCn8Sjch8MF2mikafe4gxR1xxM0h69cCAYBuFlTn0tOvHc2vpiogz3TAHkaRGDeZVRXf46i9XnYx'\n }\n    })\n    .then( res => {\n      console.log(res.data);\n       if(lat == null && long == null){\n  \t\tlat = res.data.businesses[0].coordinates.latitude;\n  \t\tlong = res.data.businesses[0].coordinates.longitude;\n  }\n      if(!this.state.pickupChecked){\n\n      res.data = res.data.businesses.filter((biz) => {\n        if(this.state.food_filter){\n        \tvar i;\n        \tfor(i=0; i < biz.categories.length; i++){\n  \t\t\t\tvar item = biz.categories[i].title.toUpperCase()\n        \tif(biz.rating >= 4 && item.includes(this.state.food_type.toUpperCase())){\n            return biz;\n          }\n      }\n      }\n      \telse{\n      \t\tif(biz.rating >= 4){\n      \t\t\treturn biz;\n      \t\t}\n\n      \t}\n\n      })\n    }\n      return [res.data, res.data, true, {center: [lat,long], zoom:15}, false]\n    \n      \n    \n    })\n    .catch( err => {\n      console.log(err);\n    })\n\n}"]},"metadata":{},"sourceType":"module"}